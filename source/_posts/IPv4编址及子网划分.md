---
title: IPv4编址及子网划分
tags:
  - 锐捷
categories:
  - 学习
  - 锐捷
abbrlink: bd3dc348
date: 2022-06-03 16:54:31
---

<div class="danger">

>  资料来源[锐捷](https://talent.ruijie.com.cn/certification/profession/)
>  非原创

</div>





# IPv4地址概述及分类

###  IPV4地址的作用

用于标识一个节点的网络地址

### IPv4报文结构

版本：目前的IP协议版本号为4 

服务类型：用于IP报文的标记，多用于QoS

生存时间：IP报文所允许通过的路由器的最大数量

协议：指出IP报文携带的数据使用的协议

源IP地址：标识IP数据报的源端设备

目的IP地址：标识IP数据报的目的地址

![1](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165120.png)

### IPv4地址概述

IP地址结构：IP地址长度为32位，包括主机位和网络位两部分

网络位是为了标识这个IP所属的网段

主机为是为了标识这个IP地址所在网段中具体节点

![2](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165120.png)



### IPv4地址概述

* 为了方便书写和表达，我们将IPv4地址分为4段，称为“点分十进制” 

* 每段从0开始到255结束，最小的IP是0.0.0.0，最大的IP是255.255.255.255

![3](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165117.png)

* IP地址结构

  * IP地址举例：172.16.122.204、


![4](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165120.png)



### IPv4地址分类

![5](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165121.png)

*  A类IP地址范围：1.0.0.0~126.255.255.255；
   * 前8位为网络位，第一位为0，其余的7位可以分配，A类地址共分为2 7块，每一块网络号不同
   * A类地址网络号全为0和网络位全为1的地址保留
   * 每个A类网络可以分配的主机号的数量为2 24 -2=16777214（主机号全为0和全为1的两个地址保留）
*  B类IP地址范围：128.0.0.0~191.255.255.255
   * 前16位为网络位，前两位为10，其余的14位可以分配，B类地址共分为2 14块
   * B类网络可以分配的主机号的数量为2 16 -2=65534（主机号全为0和全为1的两个地址保留）
*  C类IP地址：192.0.0.0~223.255.255.255
   * 前24位为网络位，前三位为110，其余的21位可以分配，C类地址共分为2 21块
   * C类网络可以分配的主机号的数量为2 8 -2=254（主机号全为0和全为1的两个地址保留）
*  D类IP地址：224.0.0.0~239.255.255.255
   * D类地址不标识网络，用于组播地址
*  E类IP地址：240.0.0.0~247.255.255.255
   * E类IP地址：240.0.0.0~247.255.255.255



### 私有IP地址

* 为了节省IP地址，将IP地址分为 

  * 公有地址 

  * 私有地址 
* 私有地址 
  * A类:10.0.0.0至10.255.255.255 
  * B类:172.16.0.0至172.31.255.255
  * C类:192.168.0.0至192.168.255.255 
* 私有地址只能应用于企业内网 
  * 在企业边界通过NAT把数据的私有地址转换为公有地址




### 特殊地址

* 本地回环地址（测试）
  * 127.X.X.X 
* 网络号：主机位全为0 
  *  例：192.168.1.0/24 
* 子网广播地址：主机位全为1 
  *    例：192.168.1.255/24 
* 本地广播地址 
  * 255.255.255.255  
* 未知地址：网络位和主机位全为0 
  *  0.0.0.0

## 子网划分

### 子网掩码

子网掩码用来区分IP地址中的网络位和主机位

子网掩码由连续的1和0组成：1表示对应IP地址的网络位，0表示对应IP地址的主机位 

IP地址和子网掩码本质均是由32位二进制数字组成

为了书写方便，使用“/数字”法表示子网掩码

![6](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165125.png)



### 子网划分

改变子网掩码，把一个大的网络划分为若干个小的网络 

 提高IP地址的使用率 

子网的个数：2 𝑋 (x 代表子网的位数)

每个子网内有效主机个数： 2 y -2(y 代表主机位数

![7](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165127.png)



### 子网划分示例

一个C类网段：192.168.10.0/24 

 默认掩码 /24（255.255.255.0） 

总共IP ，2的8次方=256个 

掩码就像一把“刀”，将网段进行“切割”

![8](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165129.png)





### CIDR 子网聚合

* CIDR（Classless Inter-Domain Routing，无类域间路由) 
  * 将多个“有类”的子网合并成一个，以减少路由表中的路由条目 、
  * 不受制于A B C类地址空间，消除了自然分类地址和子网划分的界限

![9](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165131.png)



### CIDR 子网聚合案例



![10](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165132.png)

### 路由聚合的计算方法

* 第一步：将地址转换为二进制格式，并将它们对齐 
* 第二步：找到所有地址中都相同的最后一位。在它后面划一条竖线。
* 第三步：竖线左边的位数为子网掩码位数。
* 第四步：竖线右边全设为零，竖线左边保持不变，即可形成路由汇总网络地址

![11](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165134.png)



## 园区网络IP地址规划

### IP地址规划原则



* IP地址规划的好坏，将会直接给网络带来影响：
  * 网络路由协议算法的效率 
  * 网络的性能 
  * 网络的扩展 
  * 网络的管理
* P地址规划主要遵从四个原则：
  * 唯一性：一个IP网络中不能有两个主机使用相同的IP地址
  * 可扩展性：在IP地址分配时，要有一定的余量，以满足网络扩展时的需要 
  * 连续性：分配的连续的IP地址要有利于管理和地址汇总，连续的IP地址易于汇总，减小路由表，提高路由效率
  * 实意性：分配IP地址时尽量使所分配的IP地址具有一定实际意义
    * 例如：使人一看到该IP地址就可以知道此IP地址分配给了哪个部门或哪个地区



### 节约IP地址的技巧

* 在分配IP地址时，如需要节约IP地址，注意以下几点：
  * 配置Loopback地址时，使用的子网掩码为32
  * 配置互联地址时，使用的子网掩码为/30 
  * 对各业务网关进行统一设定
    * 比如：将所有的网关统一设置成X.X.X.254 
  * 在完成IP地址规划之后，公司既可以配置静态IP地址，也可以使用DHCP服务器动态分配IP地址



![12](https://luren-1310495826.cos.ap-beijing.myqcloud.com/blog/Ruijie/20220603165136.png)
